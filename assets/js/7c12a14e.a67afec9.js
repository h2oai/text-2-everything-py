"use strict";(globalThis.webpackChunksite=globalThis.webpackChunksite||[]).push([[419],{639:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>a,default:()=>h,frontMatter:()=>c,metadata:()=>s,toc:()=>o});const s=JSON.parse('{"id":"guides/chat","title":"Chat","description":"Turn natural language into SQL, or generate and execute (Chat to Answer).","source":"@site/docs/guides/chat.md","sourceDirName":"guides","slug":"/guides/chat","permalink":"/text-2-everything-py/guides/chat","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"Chat"},"sidebar":"defaultSidebar","previous":{"title":"Chat Sessions","permalink":"/text-2-everything-py/guides/chat_sessions"},"next":{"title":"Chat Presets","permalink":"/text-2-everything-py/guides/chat_presets"}}');var i=t(4848),r=t(8453);const c={title:"Chat"},a=void 0,l={},o=[{value:"Basic Usage",id:"basic-usage",level:2},{value:"RAG Retrieval Filtering",id:"rag-retrieval-filtering",level:2},{value:"Understanding Cutoff Values",id:"understanding-cutoff-values",level:3},{value:"Using Cutoff Parameters with chat_to_sql",id:"using-cutoff-parameters-with-chat_to_sql",level:3},{value:"Using Cutoff Parameters with chat_to_answer",id:"using-cutoff-parameters-with-chat_to_answer",level:3},{value:"Cutoff Parameter Guidelines",id:"cutoff-parameter-guidelines",level:3},{value:"When to Use Cutoff Parameters",id:"when-to-use-cutoff-parameters",level:3},{value:"Examples by Use Case",id:"examples-by-use-case",level:3}];function d(e){const n={code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.p,{children:"Turn natural language into SQL, or generate and execute (Chat to Answer)."}),"\n",(0,i.jsx)(n.h2,{id:"basic-usage",children:"Basic Usage"}),"\n",(0,i.jsx)(n.p,{children:"Generate SQL:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'resp = client.chat.chat_to_sql(\n    project_id=project.id,\n    chat_session_id=session.id,\n    query="How many active users?",\n    contexts_limit=5,\n    examples_limit=3,\n)\nprint(resp.sql_query)\n'})}),"\n",(0,i.jsx)(n.p,{children:"Generate and execute (requires a Connector):"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'answer = client.chat.chat_to_answer(\n    project_id=project.id,\n    chat_session_id=session.id,\n    query="Top 10 customers by revenue",\n    connector_id=connector.id,\n)\nif answer.execution_result:\n    print(answer.execution_result.result)\n'})}),"\n",(0,i.jsx)(n.p,{children:"Agent helper:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'answer = client.chat.chat_with_agent(\n    project_id="proj-123",\n    chat_session_id=session.id,\n    query="Analyze churn",\n    connector_id=connector.id,\n    custom_tool_id=tool.id,\n    agent_accuracy="basic", # quick | basic | standard | maximum\n)\n'})}),"\n",(0,i.jsx)(n.h2,{id:"rag-retrieval-filtering",children:"RAG Retrieval Filtering"}),"\n",(0,i.jsx)(n.p,{children:"Control retrieval quality by filtering documents based on KNN distance. The cutoff parameters use L2 distance in embedding space to filter retrieved documents."}),"\n",(0,i.jsx)(n.h3,{id:"understanding-cutoff-values",children:"Understanding Cutoff Values"}),"\n",(0,i.jsx)(n.p,{children:"The cutoff parameters filter by KNN distance (L2 space):"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsxs)(n.strong,{children:[(0,i.jsx)(n.code,{children:"0"})," (default)"]}),": No filtering - retrieves all documents regardless of similarity"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Low values"})," (e.g., ",(0,i.jsx)(n.code,{children:"0.00001"})," - ",(0,i.jsx)(n.code,{children:"0.1"}),"): ",(0,i.jsx)(n.strong,{children:"MORE restrictive"})," - only retrieves very similar documents (near-exact matches)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"High values"})," (e.g., ",(0,i.jsx)(n.code,{children:"100+"}),"): ",(0,i.jsx)(n.strong,{children:"LESS restrictive"})," - retrieves most documents with minimal filtering"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Range"}),": Unbounded (no upper limit), but practical values typically between 0 and 10"]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Important"}),": Lower values mean stricter filtering, higher values mean looser filtering. This is distance-based, not similarity-based."]}),"\n",(0,i.jsx)(n.h3,{id:"using-cutoff-parameters-with-chat_to_sql",children:"Using Cutoff Parameters with chat_to_sql"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'resp = client.chat.chat_to_sql(\n    project_id=project.id,\n    chat_session_id=session.id,\n    query="Show me customer analytics",\n    contexts_cutoff=0.5,      # Fairly strict context filtering\n    schema_cutoff=0.3,        # Very strict schema filtering (closer matches only)\n    feedback_cutoff=0.7,      # Moderate feedback filtering\n    examples_cutoff=0.4,      # Strict example filtering\n)\nprint(resp.sql_query)\n'})}),"\n",(0,i.jsx)(n.h3,{id:"using-cutoff-parameters-with-chat_to_answer",children:"Using Cutoff Parameters with chat_to_answer"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'answer = client.chat.chat_to_answer(\n    project_id=project.id,\n    chat_session_id=session.id,\n    query="Calculate monthly revenue",\n    connector_id=connector.id,\n    contexts_cutoff=0.3,      # Very strict - only highly relevant contexts\n    schema_cutoff=0.2,        # Extremely strict - near-exact schema matches\n    feedback_cutoff=0.5,      # Moderate feedback filtering\n    examples_cutoff=0.3,      # Very strict example matching\n)\nif answer.execution_result:\n    print(answer.execution_result.result)\n'})}),"\n",(0,i.jsx)(n.h3,{id:"cutoff-parameter-guidelines",children:"Cutoff Parameter Guidelines"}),"\n",(0,i.jsx)(n.p,{children:"Each cutoff independently controls its document type using KNN distance:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"contexts_cutoff"}),": Filters context documents by distance"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"schema_cutoff"}),": Filters schema metadata by distance"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"feedback_cutoff"}),": Filters user feedback by distance"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"examples_cutoff"}),": Filters golden examples by distance"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Recommended Starting Values:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Strict filtering"})," (high precision): ",(0,i.jsx)(n.code,{children:"0.1 - 0.3"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Moderate filtering"})," (balanced): ",(0,i.jsx)(n.code,{children:"0.4 - 0.7"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Loose filtering"})," (high recall): ",(0,i.jsx)(n.code,{children:"0.8 - 2.0"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"No filtering"}),": ",(0,i.jsx)(n.code,{children:"0"})," or omit the parameter"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"when-to-use-cutoff-parameters",children:"When to Use Cutoff Parameters"}),"\n",(0,i.jsx)(n.p,{children:"Use cutoff parameters to:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Reduce noise"}),": Set low cutoff values (0.1-0.3) to retrieve only highly relevant documents"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Improve precision"}),": Stricter filtering ensures retrieved documents are closely related to the query"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Handle large datasets"}),": Filter out less relevant documents when you have many embeddings"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Balance precision vs recall"}),": Adjust values based on whether you need exact matches or broader context"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"examples-by-use-case",children:"Examples by Use Case"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'# High precision - only very relevant documents\nresp = client.chat.chat_to_sql(\n    project_id=project.id,\n    chat_session_id=session.id,\n    query="exact column names in users table",\n    schema_cutoff=0.1,  # Very strict - only near-exact matches\n)\n\n# Balanced approach - moderate filtering\nresp = client.chat.chat_to_sql(\n    project_id=project.id,\n    chat_session_id=session.id,\n    query="show customer information",\n    contexts_cutoff=0.5,\n    schema_cutoff=0.5,\n    examples_cutoff=0.5,\n)\n\n# High recall - retrieve more context\nresp = client.chat.chat_to_sql(\n    project_id=project.id,\n    chat_session_id=session.id,\n    query="general analytics query",\n    contexts_cutoff=1.5,  # Loose filtering - more context\n    examples_cutoff=1.0,\n)\n'})})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>c,x:()=>a});var s=t(6540);const i={},r=s.createContext(i);function c(e){const n=s.useContext(r);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:c(e.components),s.createElement(r.Provider,{value:n},e.children)}}}]);
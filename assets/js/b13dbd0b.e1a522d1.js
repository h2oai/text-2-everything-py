"use strict";(globalThis.webpackChunksite=globalThis.webpackChunksite||[]).push([[581],{8453:(e,n,t)=>{t.d(n,{R:()=>a,x:()=>c});var s=t(6540);const r={},i=s.createContext(r);function a(e){const n=s.useContext(i);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),s.createElement(i.Provider,{value:n},e.children)}},9911:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>o,contentTitle:()=>c,default:()=>u,frontMatter:()=>a,metadata:()=>s,toc:()=>l});const s=JSON.parse('{"id":"quick-start/complete-example","title":"Complete SDK Example","description":"This guide demonstrates how to build a text-to-SQL application using the Text2Everything SDK. The example uses an e-commerce database scenario.","source":"@site/docs/quick-start/complete-example.md","sourceDirName":"quick-start","slug":"/quick-start/complete-example","permalink":"/text-2-everything-py/quick-start/complete-example","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"defaultSidebar","previous":{"title":"5-minute quick start","permalink":"/text-2-everything-py/quick-start/five-minute-start"},"next":{"title":"Text2Everything Developer & Data Scientist Starter Guide","permalink":"/text-2-everything-py/quick-start/developer-starter-guide"}}');var r=t(4848),i=t(8453);const a={},c="Complete SDK Example",o={},l=[{value:"Overview",id:"overview",level:2},{value:"Setup",id:"setup",level:2},{value:"Step 1: Define Data Model",id:"step-1-define-data-model",level:2},{value:"Step 2: Add Business Context",id:"step-2-add-business-context",level:2},{value:"Step 3: Add Golden Examples",id:"step-3-add-golden-examples",level:2},{value:"Step 4: Generate SQL",id:"step-4-generate-sql",level:2},{value:"Step 5: Execute Queries (Optional)",id:"step-5-execute-queries-optional",level:2},{value:"Step 6: Add Feedback",id:"step-6-add-feedback",level:2},{value:"Step 7: Use Execution Cache",id:"step-7-use-execution-cache",level:2},{value:"Complete Workflow",id:"complete-workflow",level:2},{value:"Common Queries to Try",id:"common-queries-to-try",level:2},{value:"Best Practices",id:"best-practices",level:2},{value:"1. Schema Design",id:"1-schema-design",level:3},{value:"2. Context Management",id:"2-context-management",level:3},{value:"3. Golden Examples",id:"3-golden-examples",level:3},{value:"4. Feedback Loop",id:"4-feedback-loop",level:3},{value:"5. Performance",id:"5-performance",level:3},{value:"Next Steps",id:"next-steps",level:2},{value:"Learn Advanced Features",id:"learn-advanced-features",level:3},{value:"Production Deployment",id:"production-deployment",level:3},{value:"Enterprise Integration",id:"enterprise-integration",level:3},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"SQL Quality Issues",id:"sql-quality-issues",level:3},{value:"Performance Issues",id:"performance-issues",level:3},{value:"Summary",id:"summary",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"complete-sdk-example",children:"Complete SDK Example"})}),"\n",(0,r.jsx)(n.p,{children:"This guide demonstrates how to build a text-to-SQL application using the Text2Everything SDK. The example uses an e-commerce database scenario."}),"\n",(0,r.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,r.jsx)(n.p,{children:"We'll build a query system for an e-commerce database with:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"3 related tables (customers, orders, products)"}),"\n",(0,r.jsx)(n.li,{children:"Business context and rules"}),"\n",(0,r.jsx)(n.li,{children:"Example queries"}),"\n",(0,r.jsx)(n.li,{children:"SQL generation and execution"}),"\n",(0,r.jsx)(n.li,{children:"Feedback and caching"}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Time"}),": ~15 minutes | ",(0,r.jsx)(n.strong,{children:"Level"}),": Beginner to Intermediate"]}),"\n",(0,r.jsx)(n.h2,{id:"setup",children:"Setup"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'from text2everything_sdk import Text2EverythingClient\n\n# Initialize client\nclient = Text2EverythingClient(\n    base_url="https://your-api.com",\n    access_token="your-token",\n    workspace_name="workspaces/prod"\n)\n\n# Create project\nproject = client.projects.create(\n    name="E-commerce Analytics",\n    description="Natural language queries for e-commerce data"\n)\n\nprint(f"Project created: {project.id}")\n'})}),"\n",(0,r.jsx)(n.h2,{id:"step-1-define-data-model",children:"Step 1: Define Data Model"}),"\n",(0,r.jsx)(n.p,{children:"Create schemas for your database tables:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'# Customers table\ncustomers_schema = client.schema_metadata.create(\n    project_id=project.id,\n    name="customers_table",\n    schema_data={\n        "table": {\n            "name": "customers",\n            "columns": [\n                {"name": "customer_id", "type": "INTEGER", "description": "Primary key"},\n                {"name": "name", "type": "VARCHAR(100)", "description": "Customer name"},\n                {"name": "email", "type": "VARCHAR(255)", "description": "Email address"},\n                {"name": "signup_date", "type": "DATE", "description": "Account creation date"},\n                {"name": "tier", "type": "VARCHAR(20)", "description": "Customer tier: bronze, silver, gold"}\n            ]\n        }\n    }\n)\n\n# Orders table\norders_schema = client.schema_metadata.create(\n    project_id=project.id,\n    name="orders_table",\n    schema_data={\n        "table": {\n            "name": "orders",\n            "columns": [\n                {"name": "order_id", "type": "INTEGER"},\n                {"name": "customer_id", "type": "INTEGER", "description": "FK to customers"},\n                {"name": "order_date", "type": "TIMESTAMP"},\n                {"name": "total_amount", "type": "DECIMAL(10,2)"},\n                {"name": "status", "type": "VARCHAR(20)", "description": "pending, shipped, delivered"}\n            ]\n        }\n    }\n)\n\n# Products table\nproducts_schema = client.schema_metadata.create(\n    project_id=project.id,\n    name="products_table",\n    schema_data={\n        "table": {\n            "name": "products",\n            "columns": [\n                {"name": "product_id", "type": "INTEGER"},\n                {"name": "name", "type": "VARCHAR(200)"},\n                {"name": "category", "type": "VARCHAR(50)"},\n                {"name": "price", "type": "DECIMAL(10,2)"}\n            ]\n        }\n    }\n)\n\n# Define relationship\nrelationship = client.schema_metadata.create(\n    project_id=project.id,\n    name="customer_orders_relationship",\n    schema_data={\n        "relationship": {\n            "from_table": "customers",\n            "to_table": "orders",\n            "from_column": "customer_id",\n            "to_column": "customer_id",\n            "type": "one_to_many"\n        }\n    }\n)\n\nprint("Data model defined")\n'})}),"\n",(0,r.jsx)(n.h2,{id:"step-2-add-business-context",children:"Step 2: Add Business Context"}),"\n",(0,r.jsx)(n.p,{children:"Provide business rules and definitions:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'# Business rules\nbusiness_rules = client.contexts.create(\n    project_id=project.id,\n    name="Business Rules",\n    content="""\n    - Active customers have placed an order in the last 90 days\n    - VIP customers are those with tier=\'gold\' or total purchases > $10,000\n    - Monthly active users are counted by unique customers with orders in that month\n    - Revenue is calculated from orders with status=\'delivered\'\n    """,\n    is_always_displayed=True\n)\n\n# Data definitions\ndefinitions = client.contexts.create(\n    project_id=project.id,\n    name="Data Definitions",\n    content="""\n    - Customer tiers: bronze (new), silver (regular), gold (VIP)\n    - Order statuses: pending, shipped, delivered, cancelled\n    - Product categories: electronics, clothing, home, sports\n    """,\n    is_always_displayed=True\n)\n\nprint("Business context added")\n'})}),"\n",(0,r.jsx)(n.h2,{id:"step-3-add-golden-examples",children:"Step 3: Add Golden Examples"}),"\n",(0,r.jsx)(n.p,{children:"Provide example queries to guide SQL generation:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'# Example 1: Customer count\nexample1 = client.golden_examples.create(\n    project_id=project.id,\n    name="Active customer count",\n    user_query="How many active customers do we have?",\n    sql_query="""\n    SELECT COUNT(DISTINCT customer_id) \n    FROM orders \n    WHERE order_date >= CURRENT_DATE - INTERVAL \'90 days\'\n    """,\n    description="Count customers with recent orders"\n)\n\n# Example 2: Revenue by category\nexample2 = client.golden_examples.create(\n    project_id=project.id,\n    name="Revenue by category",\n    user_query="What\'s our revenue by product category?",\n    sql_query="""\n    SELECT \n        p.category,\n        SUM(o.total_amount) as revenue\n    FROM orders o\n    JOIN products p ON o.product_id = p.product_id\n    WHERE o.status = \'delivered\'\n    GROUP BY p.category\n    ORDER BY revenue DESC\n    """,\n    description="Calculate delivered order revenue by category"\n)\n\n# Example 3: Top customers\nexample3 = client.golden_examples.create(\n    project_id=project.id,\n    name="Top customers",\n    user_query="Show me our top 10 customers by revenue",\n    sql_query="""\n    SELECT \n        c.name,\n        c.email,\n        SUM(o.total_amount) as total_revenue\n    FROM customers c\n    JOIN orders o ON c.customer_id = o.customer_id\n    WHERE o.status = \'delivered\'\n    GROUP BY c.customer_id, c.name, c.email\n    ORDER BY total_revenue DESC\n    LIMIT 10\n    """,\n    description="Top customers by total delivered order value"\n)\n\nprint("Golden examples added")\n'})}),"\n",(0,r.jsx)(n.h2,{id:"step-4-generate-sql",children:"Step 4: Generate SQL"}),"\n",(0,r.jsx)(n.p,{children:"Create a chat session and generate SQL:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'# Create chat session\nsession = client.chat_sessions.create(\n    project_id=project.id,\n    name="Analytics Session"\n)\n\n# Generate SQL from natural language\nresponse = client.chat.chat_to_sql(\n    project_id=project.id,\n    chat_session_id=session.id,\n    query="What are the monthly sales trends for the last year?"\n)\n\nprint(f"\\nQuery: What are the monthly sales trends for the last year?")\nprint(f"Generated SQL:\\n{response.sql_query}")\nprint(f"\\nExplanation: {response.explanation}")\n'})}),"\n",(0,r.jsx)(n.h2,{id:"step-5-execute-queries-optional",children:"Step 5: Execute Queries (Optional)"}),"\n",(0,r.jsx)(n.p,{children:"If you have a database connector:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'# Create connector (Snowflake example)\nconnector = client.connectors.create(\n    name="E-commerce Database",\n    db_type="snowflake",\n    host="your-account.snowflakecomputing.com",\n    port=443,\n    database="ecommerce",\n    username="your-username",\n    password="your-password",\n    config={"warehouse": "COMPUTE_WH"}\n)\n\n# Generate and execute SQL\nanswer = client.chat.chat_to_answer(\n    project_id=project.id,\n    chat_session_id=session.id,\n    query="How many orders were placed last month?",\n    connector_id=connector.id\n)\n\nif answer.execution_result:\n    print(f"\\nSQL: {answer.sql_query}")\n    print(f"Result: {answer.execution_result.result}")\n    print(f"Execution time: {answer.execution_result.execution_time_ms}ms")\n'})}),"\n",(0,r.jsx)(n.h2,{id:"step-6-add-feedback",children:"Step 6: Add Feedback"}),"\n",(0,r.jsx)(n.p,{children:"Improve the system with user feedback:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'# Positive feedback for good results\nfeedback = client.feedback.create_positive(\n    project_id=project.id,\n    chat_message_id=answer.chat_message_id,\n    feedback_text="Perfect! Exactly what I needed.",\n    execution_id=answer.execution_result.execution_id\n)\n\nprint("Feedback added - this execution is now cached for reuse")\n'})}),"\n",(0,r.jsx)(n.h2,{id:"step-7-use-execution-cache",children:"Step 7: Use Execution Cache"}),"\n",(0,r.jsx)(n.p,{children:"Leverage cached results for similar queries:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'# Look for cached executions\ncache_result = client.chat.execution_cache_lookup(\n    project_id=project.id,\n    user_query="How many orders last month",\n    connector_id=connector.id,\n    only_positive_feedback=True,  # Only use verified good queries\n    similarity_threshold=0.8\n)\n\nif cache_result.cache_hit:\n    print(f"\\nFound {len(cache_result.matches)} similar cached queries")\n\n    best_match = cache_result.matches[0]\n    print(f"Similarity: {best_match.similarity_score:.2f}")\n    print(f"Cached SQL: {best_match.execution[\'sql_query\']}")\n    print(f"Cached Result: {best_match.execution[\'result\']}")\nelse:\n    print("No cache hits - executing new query")\n'})}),"\n",(0,r.jsx)(n.h2,{id:"complete-workflow",children:"Complete Workflow"}),"\n",(0,r.jsx)(n.p,{children:"Here's a complete function that ties it all together:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'def query_with_cache(client, project_id, session_id, connector_id, user_query):\n    """\n    Query with cache-first strategy and feedback collection.\n    """\n    # 1. Try cache first\n    cache_result = client.chat.execution_cache_lookup(\n        project_id=project_id,\n        user_query=user_query,\n        connector_id=connector_id,\n        similarity_threshold=0.85,\n        only_positive_feedback=True\n    )\n    \n    if cache_result.cache_hit and cache_result.matches:\n        print("Using cached result")\n        return cache_result.matches[0].execution[\'result\']\n\n    # 2. Generate and execute new query\n    print("Generating new query...")\n    answer = client.chat.chat_to_answer(\n        project_id=project_id,\n        chat_session_id=session_id,\n        query=user_query,\n        connector_id=connector_id\n    )\n    \n    if answer.execution_result:\n        print(f"Query executed in {answer.execution_result.execution_time_ms}ms")\n\n        # 3. Collect feedback (in production, ask user)\n        # For now, we\'ll add positive feedback automatically\n        client.feedback.create_positive(\n            project_id=project_id,\n            chat_message_id=answer.chat_message_id,\n            feedback_text="Query executed successfully",\n            execution_id=answer.execution_result.execution_id\n        )\n        \n        return answer.execution_result.result\n    \n    return None\n\n# Usage\nresult = query_with_cache(\n    client,\n    project.id,\n    session.id,\n    connector.id,\n    "What were our total sales last quarter?"\n)\nprint(f"Result: {result}")\n'})}),"\n",(0,r.jsx)(n.h2,{id:"common-queries-to-try",children:"Common Queries to Try"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'queries = [\n    "How many new customers signed up last month?",\n    "What\'s the average order value by customer tier?",\n    "Which products are selling best this quarter?",\n    "Show me customers who haven\'t ordered in 6 months",\n    "What\'s our revenue growth month over month?"\n]\n\nfor query in queries:\n    response = client.chat.chat_to_sql(\n        project_id=project.id,\n        chat_session_id=session.id,\n        query=query\n    )\n    print(f"\\nQuery: {query}")\n    print(f"SQL: {response.sql_query[:100]}...")\n'})}),"\n",(0,r.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,r.jsx)(n.h3,{id:"1-schema-design",children:"1. Schema Design"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Include descriptive column descriptions"}),"\n",(0,r.jsx)(n.li,{children:"Define relationships between tables"}),"\n",(0,r.jsx)(n.li,{children:"Add dimensions and metrics for common aggregations"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"2-context-management",children:"2. Context Management"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Keep contexts concise and focused"}),"\n",(0,r.jsxs)(n.li,{children:["Mark important contexts as ",(0,r.jsx)(n.code,{children:"is_always_displayed=True"})]}),"\n",(0,r.jsx)(n.li,{children:"Update contexts as business rules change"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"3-golden-examples",children:"3. Golden Examples"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Cover common query patterns"}),"\n",(0,r.jsx)(n.li,{children:"Include edge cases"}),"\n",(0,r.jsx)(n.li,{children:"Keep examples up-to-date with schema changes"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"4-feedback-loop",children:"4. Feedback Loop"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Always add feedback for executed queries"}),"\n",(0,r.jsx)(n.li,{children:"Use positive feedback to build cache"}),"\n",(0,r.jsx)(n.li,{children:"Review negative feedback to improve examples"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"5-performance",children:"5. Performance"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Use cache lookup before executing queries"}),"\n",(0,r.jsx)(n.li,{children:"Set appropriate similarity thresholds"}),"\n",(0,r.jsx)(n.li,{children:"Monitor cache hit rates"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,r.jsx)(n.h3,{id:"learn-advanced-features",children:"Learn Advanced Features"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"/text-2-everything-py/guides/chat#rag-retrieval-filtering",children:"RAG Filtering"})," - Fine-tune context retrieval"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"/text-2-everything-py/how-to/bulk_operations",children:"Bulk Operations"})," - Efficiently manage large datasets"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"/text-2-everything-py/guides/chat_presets",children:"Chat Presets"})," - Reusable configurations"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"production-deployment",children:"Production Deployment"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"/text-2-everything-py/guides/connectors",children:"Connectors Guide"})," - Connect to your databases"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"/text-2-everything-py/guides/feedback",children:"Feedback Guide"})," - Build feedback loops"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"/text-2-everything-py/guides/executions",children:"Executions Guide"})," - Optimize query execution"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"enterprise-integration",children:"Enterprise Integration"}),"\n",(0,r.jsx)(n.p,{children:"For H2O ecosystem integration including H2O Drive, CustomGPT, and agent orchestration, see:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"/text-2-everything-py/quick-start/developer-starter-guide",children:"Advanced Integration Guide"})}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,r.jsx)(n.h3,{id:"sql-quality-issues",children:"SQL Quality Issues"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'# Fine-tune RAG retrieval for better context\nresponse = client.chat.chat_to_sql(\n    project_id=project.id,\n    chat_session_id=session.id,\n    query="your query",\n    contexts_cutoff=0.3,      # Stricter context matching\n    examples_cutoff=0.2,      # Very strict example matching\n    schema_cutoff=0.2         # Precise schema matching\n)\n'})}),"\n",(0,r.jsx)(n.h3,{id:"performance-issues",children:"Performance Issues"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"# Use bulk operations for large datasets\nschemas = client.schema_metadata.bulk_create(\n    project_id=project.id,\n    schema_metadata_list=schema_list,\n    validate=True\n)\n"})}),"\n",(0,r.jsx)(n.h2,{id:"summary",children:"Summary"}),"\n",(0,r.jsx)(n.p,{children:"This guide covered the following tasks:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Define data models with schemas and relationships"}),"\n",(0,r.jsx)(n.li,{children:"Add business context and rules"}),"\n",(0,r.jsx)(n.li,{children:"Provide golden examples for guidance"}),"\n",(0,r.jsx)(n.li,{children:"Generate SQL from natural language"}),"\n",(0,r.jsx)(n.li,{children:"Execute queries (optional)"}),"\n",(0,r.jsx)(n.li,{children:"Add feedback to improve results"}),"\n",(0,r.jsx)(n.li,{children:"Leverage caching for performance"}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["For advanced features and best practices, see the ",(0,r.jsx)(n.a,{href:"/text-2-everything-py/guides/projects",children:"Guides"}),"."]})]})}function u(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}}}]);
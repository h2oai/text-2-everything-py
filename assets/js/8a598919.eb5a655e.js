"use strict";(self.webpackChunksite=self.webpackChunksite||[]).push([[291],{4666:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>o,contentTitle:()=>l,default:()=>u,frontMatter:()=>c,metadata:()=>a,toc:()=>i});const a=JSON.parse('{"id":"how-to/bulk_operations","title":"Bulk Operations","description":"Create many items efficiently. If bulk fails, fall back to per-item creates.","source":"@site/docs/how-to/bulk_operations.md","sourceDirName":"how-to","slug":"/how-to/bulk_operations","permalink":"/text-2-everything-py/how-to/bulk_operations","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"Bulk Operations"},"sidebar":"defaultSidebar","previous":{"title":"Concurrency & Performance","permalink":"/text-2-everything-py/guides/concurrency"},"next":{"title":"Jupyter Usage","permalink":"/text-2-everything-py/how-to/jupyter"}}');var r=n(4848),s=n(8453);const c={title:"Bulk Operations"},l=void 0,o={},i=[];function d(e){const t={code:"code",p:"p",pre:"pre",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.p,{children:"Create many items efficiently. If bulk fails, fall back to per-item creates."}),"\n",(0,r.jsx)(t.p,{children:"Contexts bulk:"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-python",children:'items = [{"name": "Rule 1", "content": "..."}, {"name": "Rule 2", "content": "..."}]\ncreated = client.contexts.bulk_create(project.id, items)\n'})}),"\n",(0,r.jsx)(t.p,{children:"Schema metadata bulk with validation:"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-python",children:'schemas = [\n  {"name": "t1", "schema_data": {"table": {"name": "t1", "columns": []}}},\n  {"name": "dim1", "schema_data": {"table": {"dimension": {"name": "d", "content": {}}}}},\n]\ncreated = client.schema_metadata.bulk_create(project.id, schemas, validate=True)\n'})}),"\n",(0,r.jsx)(t.p,{children:"Golden examples bulk:"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-python",children:'examples = [\n  {"user_query": "How many users?", "sql_query": "SELECT COUNT(*) FROM users;"},\n  {"user_query": "Active users?", "sql_query": "SELECT COUNT(*) FROM users WHERE active=true;"},\n]\ncreated = client.golden_examples.bulk_create(project.id, examples)\n'})}),"\n",(0,r.jsx)(t.p,{children:"Fallback helper:"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-python",children:'def create_with_fallback(client, project_id, data_list, resource_name):\n    try:\n        if resource_name == "contexts":\n            return client.contexts.bulk_create(project_id, data_list)\n        elif resource_name == "schema_metadata":\n            return client.schema_metadata.bulk_create(project_id, data_list)\n        elif resource_name == "golden_examples":\n            return client.golden_examples.bulk_create(project_id, data_list)\n    except Exception:\n        results = []\n        for item_data in data_list:\n            try:\n                if resource_name == "contexts":\n                    results.append(client.contexts.create(project_id=project_id, **item_data))\n                elif resource_name == "schema_metadata":\n                    results.append(client.schema_metadata.create(project_id=project_id, **item_data))\n                elif resource_name == "golden_examples":\n                    results.append(client.golden_examples.create(project_id=project_id, **item_data))\n            except Exception:\n                pass\n        return results\n'})})]})}function u(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},8453:(e,t,n)=>{n.d(t,{R:()=>c,x:()=>l});var a=n(6540);const r={},s=a.createContext(r);function c(e){const t=a.useContext(s);return a.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function l(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:c(e.components),a.createElement(s.Provider,{value:t},e.children)}}}]);